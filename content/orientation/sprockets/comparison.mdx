---
title: Side-by-side comparison
---

import TabItem from '@theme/TabItem'

import SprocketsVsWebpackerTabs from '../../../src/components/SprocketsVsWebpackerTabs'

In this section, we'll compare how you get things done in Sprockets and Webpacker, side-by-side.

### Importing JavaScript

Importing will include a file in the output bundle in which it is referenced.

<SprocketsVsWebpackerTabs>
  <TabItem value="webpacker">

  In Webpacker, files are included in a bundle with "imports". An import expression can produce local reference(s) to the file's exports.

  ```js title="app/packs/javascript/another-module.js"
  export default class AnotherModule {}
  ```

  ```js title="app/packs/javascript/some-file.js"
  import AnotherModule from './another-module'

  const other = new AnotherModule()
  ```

  An import is local to the file where it is used. To use it in different files, you'd need to repeat the import expression.

  ```js title="app/packs/javascript/a-second-file.js"
  import AnotherModule from './another-module'

  const other = new AnotherModule()
  ```

  For more info, see [Importing and Exporting in Detail - Exploring ES6](https://exploringjs.com/es6/ch_modules.html#sec_importing-exporting-details)

  </TabItem>
  <TabItem value="sprockets">

  Sprockets requires relies on special comment-based syntax which must rely solely on side-effects. Any references would need to be accessed through global scope.

  ```js title="app/assets/javascripts/some-file.js"
  //= require ./another-file

  var other = new window.AnotherFile()
  ```

  This also means you'd only require the file once for use anywhere in a given bundle and require statements are order-dependent.

  ```js title="app/assets/javascripts/some-file-required-later.js"
  var other = new window.AnotherFile()
  ```

  </TabItem>
</SprocketsVsWebpackerTabs>

### Importing third-party JavaScript

<SprocketsVsWebpackerTabs>
<TabItem value="webpacker">

Third-party node packages for Webpacker are typically installed with `yarn`.

```bash
yarn add lodash
```

This programmatically adds the library to project's `package.json` file and adds it to the local `node_modules` directory on disk.

```json file="package.json"
"lodash-es": "^4.17.21",
```

Import the library in any file where its references are needed. The module will only be inclued once in a given bundle.

```js title="app/packs/src/widget1.js"
import { pick } from 'lodash-es'

const object = { a: 1, b: '2', c: 3 }

pick(object, ['a', 'c'])
// => { a: 1, c: 3 }
```

```js title="app/packs/src/widget2.js"
import { pick } from 'lodash-es'

const object = { d: 2, e: '3', f: 4 }

pick(object, ['d', 'f'])
// => { d: 2, f: 4 }
```

</TabItem>
<TabItem value="sprockets">

Sprockets relies on directory conventions for loading assets from third-party gems.

Install Ruby gem containing Sprockets-friendly assets with Bundler. This example uses the [lodash-rails](https://github.com/rh/lodash-rails) gem.

```ruby title="Gemfile"
gem "lodash-rails"
```

Require the library once in your asset bundle.

```js title="app/assets/application.js"
//= require lodash
```

Access global references from anywhere.

```js title="app/assets/widget.js"
const object = { a: 1, b: '2', c: 3 }

_.pick(object, ['a', 'c'])
// => { 'a': 1, 'c': 3 }
```

</TabItem>
</SprocketsVsWebpackerTabs>

### Rendering scripts

<SprocketsVsWebpackerTabs>

<TabItem value="webpacker">

```bash
app
├── packs
│   ├── src
│   │   └── welcome.js
│   │   └── components
│   │       └── Button.js
│   └── entrypoints
│       ├── application.js
```

```erb
<%= javascript_pack_tag 'application' %>
```

</TabItem>

<TabItem value="sprockets">

```bash
app
├── assets
│   ├── config
│   │   └── manifest.js
│   ├── images
│   ├── javascripts
│   │   └── application.js
│   └── stylesheets
│       └── application.css
```

```erb
<%= javascript_include_tag 'application' %>
```

</TabItem>

</SprocketsVsWebpackerTabs>

### Importing multiple files at once

<SprocketsVsWebpackerTabs>
  <TabItem value="sprockets">TODO: Add content</TabItem>
  <TabItem value="webpacker">TODO: Add content</TabItem>
</SprocketsVsWebpackerTabs>

### Importing CSS

<SprocketsVsWebpackerTabs>
<TabItem value="webpacker">

Webpacker will process CSS if you have [the prerequisites installed](/). TODO: Link

```css
@import './welcome.scss';
```

```js title="app/packs/javascript/anyfile.js"
import './stylesheets/welcome.scss'
```

</TabItem>
<TabItem value="sprockets">

```css
//= require ./welcome.scss
```

```css
@import '../welcome.scss';
```

</TabItem>
</SprocketsVsWebpackerTabs>

### Rendering stylesheets

<SprocketsVsWebpackerTabs>
<TabItem value="webpacker">

Given an entrypoint `application.scss` and `welcome.scss`.

```bash
app
├── packs
│   ├── stylesheets
│   │   └── button.scss
│   └── entrypoints
│       ├── application.js
│       └── application.scss
│       └── welcome.scss
```

Render the stylesheet tags in the view as follows.

```erb file="app/views/layouts/application"
<%= stylesheet_pack_tag 'application' %>
<%= stylesheet_pack_tag 'welcome' %>
```

Non-entrypoint files like 'button.scss' should be [imported](#importing-css) from somewhere in the dependency graph.

</TabItem>

<TabItem value="sprockets">

Given a Sprockets asset designated for precompilation such as `application.scss`

```bash
app
├── assets
│   └── stylesheets
│       └── application.scss
│       └── welcome.scss
```

Sprockets 3

```rb file="config/initializers/assets.rb"
Rails.assets.precompile += ['welcome.scss']
```

Sprockets 4

```js file="config/assets/manifest.js"
// JS and CSS bundles
//
//= link_directory ../javascripts .js
//= link_directory ../stylesheets .css

// Images and fonts so that views can link to them
//
//= link_tree ../fonts
//= link_tree ../images
```

Render the stylesheet tag in the view as follows

```erb file="app/views/layouts/application"
<%= stylesheet_link_tag 'application' %>
```

</TabItem>
</SprocketsVsWebpackerTabs>

### Rendering images

Images need to be processed to be referenced in Rails view templates (ERB, HAML,etc.)

<SprocketsVsWebpackerTabs>

<TabItem value="sprockets">

1.  Place images in `app/assets/images` directory

```sh
app/assets
└── images
    ├── backpack.jpg
    ├── travel
        └── fannypack.jpg
```

2.  Use `image_tag` helper in view

```erb
<%= image_tag 'backpack.jpg' %>
```

```erb
<%= image_tag 'travel/backpack.jpg' %>
```

</TabItem>
<TabItem value="webpacker">

1.  Place images in a directory of your choice. Webpacker does not automatically process images unless you manually import them.

```sh
app/packs
└── images
    ├── backpack.jpg
    ├── travel
        └── fannypack.jpg
```

2. Import image from a Webpacker JavaScript file

```js
import '../images/backpack.jpg'
```

See [requiring multiple files](/) to import many images

3.  Use `image_pack_tag` helper in view

```erb
<%= image_pack_tag 'backpack.jpg' %>
```

```erb
<%= image_pack_tag 'travel/backpack.jpg' %>
```

</TabItem>

</SprocketsVsWebpackerTabs>

### Adding bundles

<SprocketsVsWebpackerTabs>
  <TabItem value="sprockets">TODO: Add content</TabItem>
  <TabItem value="webpacker">TODO: Add content</TabItem>
</SprocketsVsWebpackerTabs>

Sprockets 3:

Rails.application.assets.precompile += []

Sprockets 4:
Precompile config
manifest

Webpacker 5

Add additional entrypoint files.

## Rendering path to asset

<SprocketsVsWebpackerTabs>
  <TabItem value="sprockets">TODO: Add content</TabItem>
  <TabItem value="webpacker">TODO: Add content</TabItem>
</SprocketsVsWebpackerTabs>

asset_path
asset_url

asset_pack_path
asset_pack_url

## Rendering favicon

<SprocketsVsWebpackerTabs>
  <TabItem value="sprockets">TODO: Add content</TabItem>
  <TabItem value="webpacker">TODO: Add content</TabItem>
</SprocketsVsWebpackerTabs>

favicon_link_tag

favicon_pack_tag

## Running precompilation

<SprocketsVsWebpackerTabs>
  <TabItem value="sprockets">TODO: Add content</TabItem>
  <TabItem value="webpacker">TODO: Add content</TabItem>
</SprocketsVsWebpackerTabs>

Sprockets
rails assets:precompile

Webpacker
rails assets:precompile
or, rails webpacker:precompile
or, bin/webpack
